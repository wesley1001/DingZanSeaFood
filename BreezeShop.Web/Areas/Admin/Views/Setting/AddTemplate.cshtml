@model Yun.Logistics.DeliveryTemplate

@{
    Layout = "~/Areas/Admin/Views/Shared/_Layout.cshtml";
    var citys = (List<Yun.Site.CityDomain>)ViewData["AllCitys"];
}


@section headerbeforeace{
    <style>

        .j-error-msg span {
            background-color: #f2dede;
            border-color: #ebccd1;
            color: #a94442;
            font-size: 14px;
        }
        .txt span {
            font-size: 14px;
        }
        #AddFareList li {
            list-style: outside none none;
        }
        #AddFareList li em {
            float: left;
            color: #FF0000;
        }
        #AddFareList .txt {
            width: 15%;
            float: left;
            max-width: 96px;
            padding: 10px 0 10px 0;
        }
        #AddFareList .u-input {
            width: 85%;
            float: left;
            padding: 10px 0 10px 0;
        }
        #FreightTables .kong { padding-right: 14px;}
        .input-text {
            width: 15%;
            max-width: 66px;
        }
        .input-name {
            width: 30%;
            max-width: 180px;
        }
        .citys {
            position: absolute;
            width: 220px;
            height: auto;
            z-index: 20000;
            top: 26px;
            left: 0;
            background-color: #FFFEC6;
            border: solid 1px #f7e4a5;
        }

        .provinces {
            white-space: nowrap;
            display: inline-block;
            position: relative;
            height: 28px;
            padding: 0 4px 0 0;
            border: 1px solid #FFF;
        }

        .provinces.p_active {
            background-color: #FFFEC6;
            border: solid 1px #f7e4a5;
            border-bottom: solid 1px #FFFEC6;
            z-index: 99999;
        }
        .areas {
            margin-right: 3px;
            padding: 4px 0 1px 4px;
            display: inline-block;
        }

        .ecity {
            position: relative;
            float: left;
            margin-right: 8px;
        }

        #AddFareList .well{margin-bottom:5px;}
    </style>
}
@section breadcrumb{
    <ul class="breadcrumb">
        <li>
            <i class="ace-icon fa fa-home home-icon"></i>
            <a href="@Url.Action("Index","Home")">首页</a>
        </li>
        <li class="active">@ViewBag.Title</li>
    </ul>
}
@section pageheader{
    <h1>
        @ViewBag.Title
    </h1>
}

@using (Html.BeginForm("SaveTemplate", "Setting", FormMethod.Post, new { @class = "form-horizontal", id = "SubmitForm" }))
{
    <input type="hidden" class="j-template-id" value="@Model.Id" />
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2 no-padding-right" for="Name">模版名称：</label>
        <div class="col-xs-12 col-sm-10">
            <div class="clearfix">@Html.TextBox("Name", Model.Name, new { @class = "input-large", placeholder = "请输入模版名称" })</div>
        </div>
    </div>
    <div class="space-4"></div>


    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2 no-padding-right">是否包邮：</label>

        <div class="col-xs-12 col-sm-10">
                <p>
                    <input name="Baoyou" type="radio" class="ace" value="0">
                    <span class="lbl"> 买家承担运费</span>
                </p>


                <p>
                    <input name="Baoyou" type="radio" class="ace" value="-1">
                    <span class="lbl"> 卖家承担运费</span>
                </p>
        </div>
    </div>

    <div class="space-4"></div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2 no-padding-right">计架方式：</label>

        <div class="col-xs-12 col-sm-10">
            <p>
                <input type="radio" value="0" text="件" @(Model.PriceType != 1 && Model.PriceType != 2 ? "checked" : "") name="type" class="ace" checked>
                <span class="lbl"> 按件数</span>
            </p>

            <p>
                <input type="radio" value="1" text="kg" name="type" @(Model.PriceType == 1 ? "checked" : "") class="ace">
                <span class="lbl"> 按重量</span>
            </p>

            <p>
                <input type="radio" value="2" text="m³" name="type" @(Model.PriceType == 2 ? "checked" : "") class="ace">
                <span class="lbl"> 按体积</span>
            </p>
        </div>
    </div>

    <div class="space-4"></div>

    <div class="form-group" id="AddFareList">
        <label class="control-label col-xs-12 col-sm-2 no-padding-right">运费方式：</label>
        <div class="col-xs-12 col-sm-10">
            <div class="u-input">
                <div class="section">
                    <p>
                        <input type="checkbox" class="j-kuaidi ace" name="IsKuaidi" value="4">
                        <span class="lbl"> 快递</span>
                    </p>
                    <div class="j-kuaidi-detail well">
                        <div>
                            <div class="j-inputs">
                                默认运费：
                                <input type="text" value="@(ViewBag.Prices.kuaidi1)" class="input-text j-kuaidi-start" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" data-val-range="首件应输入1至9999的数字" maxlength="6">件内，
                                <input type="text" value="@(ViewBag.Prices.kuaidi2)" class="input-text j-kuaidi-age" data-type="kuaidi-age" data-val-required="首费应输入0.00至999.99的数字" data-val-range-min="0" data-val-range-max="999.99" data-val-range="首费应输入0.00至999.99的数字" maxlength="6">元，每增加
                                <input type="text" value="@(ViewBag.Prices.kuaidi3)" class="input-text j-kuaidi-plus" data-type="kuaidi-plus" data-val-required="续件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" data-val-range="续件应输入1至9999的数字" maxlength="6">件，增加运费
                                <input type="text" value="@(ViewBag.Prices.kuaidi4)" class="input-text j-kuaidi-plusage" data-type="kuaidi-plusage" data-val-required="续费应输入0.00至999.99的数字" data-val-range-min="0" data-val-range-max="999.99" data-val-range="续费应输入0.00至999.99的数字" maxlength="6">元
                                <div class="j-error-msg">
                                    <span class="j-kuaidi-start-error-msg"></span>
                                    <span class="j-kuaidi-age-error-msg"></span>
                                    <span class="j-kuaidi-plus-error-msg"></span>
                                    <span class="j-kuaidi-plusage-error-msg"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="hide" id="j-kuaidi-detail">
                        <table class="table table-striped table-bordered table-hover dataTable j-sample-table-2">
                            <thead>
                                <tr class="j-inputs">
                                    <th class="center col-xs-8">运送到</th>
                                    <th>首@(Model.PriceType != 1 && Model.PriceType != 2 ? "件(件)" : (Model.PriceType == 1 ? "重(kg)" : "体积(m³)"))</th>
                                    <th>首费(元)</th>
                                    <th>续@(Model.PriceType != 1 && Model.PriceType != 2 ? "件(件)" : (Model.PriceType == 1 ? "重(kg)" : "体积(m³)"))</th>
                                    <th>续费(元)</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Prices.kuaidi != null && ViewBag.Prices.kuaidi.Count > 0)
                                {
                                    foreach (var a in ViewBag.Prices.kuaidi)
                                    {
                                        string ids = "";
                                        string name = "";
                                        for (int i = 0; i < a.Cities.Count; i++)
                                        {
                                            ids += a.Cities[i].Key + ",";
                                            name += citys.First(e => e.Id == int.Parse(a.Cities[i].Key.ToString())).Name + ",";
                                        }
                                        name = name.TrimEnd(',');
                                        ids = ids.TrimEnd(',');
                                        <tr>
                                            <td>
                                                <span id="@ids">@name</span><a class="j-city" href="javascript:void(0)">编辑</a>
                                            </td>
                                            <td>
                                                <input type="text" value="@a.BaseQuantity" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.BasePrice" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.AddQuantity" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.AddPrice" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <button class="btn btn-xs btn-danger deletes text-nowrap" type="button">
                                                    删除
                                                </button>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="j-table-city hide" id="j-kuaidi-city">
                        <a href="javascript:void(0)">为指定区域城市设置运费</a>
                    </div>
                    <div class="space-8"></div>
                </div>
                <div class="section">
                    <p>
                        <input type="checkbox" class="j-ziti ace" name="section" value="419">
                        <span class="lbl"> 自提</span>
                    </p>
                    <div class="j-ziti-detail well">
                        <div>
                            <div class="j-inputs">
                                默认运费：
                                <input type="text" value="@(ViewBag.Prices.ziti1)" class="input-text j-ziti-start" data-type="ziti-start" data-val-required="首件应输入1至9999的数字 " data-val-range-min="1" data-val-range-max="9999" data-val-range="首件应输入1至9999的数字 " maxlength="6">件内，
                                <input type="text" value="@(ViewBag.Prices.ziti2)" class="input-text j-ziti-age" data-type="ziti-age" data-val-required="首费应输入0.00至999.99的数字 " data-val-range-min="0" data-val-range-max="999.99" data-val-range="首费应输入0.00至999.99的数字 " maxlength="6">元，每增加
                                <input type="text" value="@(ViewBag.Prices.ziti3)" class="input-text j-ziti-plus" data-type="ziti-plus" data-val-required="续件应输入1至9999的数字 " data-val-range-min="1" data-val-range-max="9999" data-val-range="续件应输入1至9999的数字 " maxlength="6">件，增加运费
                                <input type="text" value="@(ViewBag.Prices.ziti4)" class="input-text j-ziti-plusage" data-type="ziti-plusage" data-val-required="续费应输入0.00至999.99的数字 " data-val-range-min="0" data-val-range-max="999.99" data-val-range="续费应输入0.00至999.99的数字 " maxlength="6">元
                                <div class="j-error-msg">
                                    <span class="j-ziti-start-error-msg"></span>
                                    <span class="j-ziti-age-error-msg"></span>
                                    <span class="j-ziti-plus-error-msg"></span>
                                    <span class="j-ziti-plusage-error-msg"></span>
                                </div>


                            </div>
                        </div>

                    </div>
                    <div class="hide" id="j-ziti-detail">
                        <table class="table table-striped table-bordered table-hover dataTable j-sample-table-2">
                            <thead>
                                <tr class="j-inputs">
                                    <th class="center col-xs-8">运送到</th>
                                    <th>首@(Model.PriceType != 1 && Model.PriceType != 2 ? "件(件)" : (Model.PriceType == 1 ? "重(kg)" : "体积(m³)"))</th>
                                    <th>首费(元)</th>
                                    <th>续@(Model.PriceType != 1 && Model.PriceType != 2 ? "件(件)" : (Model.PriceType == 1 ? "重(kg)" : "体积(m³)"))</th>
                                    <th>续费(元)</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Prices.ziti != null && ViewBag.Prices.ziti.Count > 0)
                                {
                                    foreach (var a in ViewBag.Prices.ziti)
                                    {
                                        string ids = "";
                                        string name = "";
                                        for (int i = 0; i < a.Cities.Count; i++)
                                        {
                                            ids += a.Cities[i].Key + ",";
                                            name += citys.FirstOrDefault(e => e.Id == int.Parse(a.Cities[i].Key.ToString())).Name + ",";
                                        }
                                        name = name.TrimEnd(',');
                                        ids = ids.TrimEnd(',');
                                        <tr>
                                            <td>
                                                <span id="@ids">@name</span><a class="j-city" href="javascript:void(0)">编辑</a>
                                            </td>
                                            <td>
                                                <input type="text" value="@a.BaseQuantity" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.BasePrice" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.AddQuantity" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.AddPrice" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <button class="btn btn-xs btn-danger deletes text-nowrap" type="button">
                                                    删除
                                                </button>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="j-table-city hide" id="j-ziti-city">
                        <a href="javascript:void(0)">为指定区域城市设置运费</a>
                    </div>
                    <div class="space-8"></div>
                </div>
                <div class="section">
                    <p>
                        <input type="checkbox" class="j-shangjia ace" name="IsShangjia" value="2">
                        <span class="lbl"> 商家配送</span>
                    </p>
                    <div class="j-shangjia-detail well">
                        <div>
                            <div class="j-inputs">
                                默认运费：
                                <input type="text" value="@(ViewBag.Prices.shangjia1)" class="input-text j-shangjia-start" data-type="shangjia-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" data-val-range="首件应输入1至9999的数字" maxlength="6">件内，
                                <input type="text" value="@(ViewBag.Prices.shangjia2)" class="input-text j-shangjia-age" data-type="shangjia-age" data-val-required="首费应输入0.00至999.99的数字" data-val-range-min="0" data-val-range-max="999.99" data-val-range="首费应输入0.00至999.99的数字" maxlength="6">元，每增加
                                <input type="text" value="@(ViewBag.Prices.shangjia3)" class="input-text j-shangjia-plus" data-type="shangjia-plus" data-val-required="续件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" data-val-range="续件应输入1至9999的数字" maxlength="6">件，增加运费
                                <input type="text" value="@(ViewBag.Prices.shangjia4)" class="input-text j-shangjia-plusage" data-type="shangjia-plusage" data-val-required="续费应输入0.00至999.99的数字" data-val-range-min="0" data-val-range-max="999.99" data-val-range="续费应输入0.00至999.99的数字" maxlength="6">元
                                <div class="j-error-msg">
                                    <span class="j-shangjia-start-error-msg"></span>
                                    <span class="j-shangjia-age-error-msg"></span>
                                    <span class="j-shangjia-plus-error-msg"></span>
                                    <span class="j-shangjia-plusage-error-msg"></span>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="hide" id="j-shangjia-detail">
                        <table class="table table-striped table-bordered table-hover dataTable j-sample-table-2">
                            <thead>
                                <tr class="j-inputs">
                                    <th class="center col-xs-8">运送到</th>
                                    <th>首@(Model.PriceType != 1 && Model.PriceType != 2 ? "件(件)" : (Model.PriceType == 1 ? "重(kg)" : "体积(m³)"))</th>
                                    <th>首费(元)</th>
                                    <th>续@(Model.PriceType != 1 && Model.PriceType != 2 ? "件(件)" : (Model.PriceType == 1 ? "重(kg)" : "体积(m³)"))</th>
                                    <th>续费(元)</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                @if (ViewBag.Prices.shangjia != null && ViewBag.Prices.shangjia.Count > 0)
                                {
                                    foreach (var a in ViewBag.Prices.shangjia)
                                    {
                                        string ids = "";
                                        string name = "";
                                        for (int i = 0; i < a.Cities.Count; i++)
                                        {
                                            ids += a.Cities[i].Key + ",";
                                            name += citys.FirstOrDefault(e => e.Id == int.Parse(a.Cities[i].Key.ToString())).Name + ",";
                                        }
                                        name = name.TrimEnd(',');
                                        ids = ids.TrimEnd(',');
                                        <tr>
                                            <td>
                                                <span id="@ids">@name</span><a class="j-city" href="javascript:void(0)">编辑</a>
                                            </td>
                                            <td>
                                                <input type="text" value="@a.BaseQuantity" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.BasePrice" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.AddQuantity" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <input type="text" value="@a.AddPrice" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                            </td>
                                            <td>
                                                <button class="btn btn-xs btn-danger deletes text-nowrap" type="button">
                                                    删除
                                                </button>
                                            </td>
                                        </tr>
                                    }
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="j-table-city hide" id="j-shangjia-city">
                        <a href="javascript:void(0)">为指定区域城市设置运费</a>
                    </div>
                    <div class="space-8"></div>
                </div>
                <div class="hide" id="J-Exemption">
                    <p>
                        <input type="checkbox" class="ace" name="aa" value="">
                        <span class="lbl"> 指定条件包邮</span>
                    </p>
                    <div class="hide" id="J-Exemption-table">
                        <table class="table table-striped table-bordered table-hover dataTable j-sample-table-2 j-free-condition">
                            <thead>
                                <tr class="">
                                    <th class="center col-xs-8">选择地区</th>
                                    <th>运送方式</th>
                                    <th>设置包邮条件</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="J-Exemption-tr">
                                @if (Model.FareFreeConditions != null && Model.FareFreeConditions.Count > 0)
                                {
                                    foreach (var a in Model.FareFreeConditions)
                                    {
                                        var ids = "";
                                        var name = "";
                                        for (var i = 0; i < a.Cities.Count(); i++)
                                        {
                                            ids += a.Cities[i].Key + ",";
                                            name += citys.First(e => e.Id == int.Parse(a.Cities[i].Key.ToString())).Name + ",";
                                        }
                                        name = name.TrimEnd(',');
                                        ids = ids.TrimEnd(',');
                                        <tr>
                                            <td>
                                                <span id="@ids">@name</span><a class="j-city" href="javascript:void(0)">编辑</a>
                                            </td>
                                            <td>
                                                <select name="Methods">
                                                    @foreach (var supportDelivery in Model.Freight.GroupBy(e => e.DeliveryId))
                                                    {
                                                        <option value="@supportDelivery.First().DeliveryId" @(a.DeliveryId == supportDelivery.First().DeliveryId ? "selected" : "")>@supportDelivery.First().DeliveryName</option>
                                                    }
                                                </select>
                                            </td>
                                            <td class="j-inputs" id="Conditions">
                                                <select name="Conditions">
                                                    <option value="0" @(a.Price == 0 ? "selected" : "")>@(Model.PriceType != 1 && Model.PriceType != 2 ? "件数" : (Model.PriceType == 1 ? "重量" : "体积"))</option>
                                                    <option value="1" @(a.Preferential == 0 ? "selected" : "")>金额</option>
                                                    <option value="2" @(a.Price != 0 && a.Preferential != 0 ? "selected" : "")>@(Model.PriceType != 1 && Model.PriceType != 2 ? "件数" : (Model.PriceType == 1 ? "重量" : "体积"))+金额</option>
                                                </select>
                                                <div class="space-4"></div>
                                                <p class="Conditions-table">
                                                    @if (a.Price == 0)
                                                    {
                                                        @:满<input type="text" value="@a.Preferential" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                                        @(Model.PriceType != 1 && Model.PriceType != 2 ? "件" : (Model.PriceType == 1 ? "kg" : "m³"))
                                                        @:包邮
                                                    }
                                                    else if (a.Preferential == 0)
                                                    {
                                                        @:满<input type="text" value="@a.Price" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                                        @:元包邮
                                                    }
                                                    else
                                                    {
                                                        @:满<input type="text" value="@a.Preferential" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                                        @(Model.PriceType != 1 && Model.PriceType != 2 ? "件" : (Model.PriceType == 1 ? "kg" : "m³"))
                                                        @:满<input type="text" value="@a.Price" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                                        @:元包邮
                                                    }
                                                </p>
                                            </td>
                                            <td>
                                                <button class="btn btn-xs btn-success addtr text-nowrap" type="button">添加</button>
                                                <button class="btn btn-xs btn-danger deletes text-nowrap" type="button">删除</button>
                                            </td>
                                        </tr>
                                    }
                                }
                                else
                                {
                                    <tr>
                                        <td>
                                            <span id=""></span><a class="j-city" href="javascript:void(0)">编辑</a>
                                        </td>
                                        <td>
                                            <select name="Methods">
                                                @if (Model != null && Model.Freight != null)
                                                {
                                                            foreach (var supportDelivery in Model.Freight.GroupBy(e=>e.DeliveryId))
                                                            {
                                                                <option value="@supportDelivery.First().DeliveryId">@supportDelivery.First().DeliveryName</option>
                                                            }
                                                }
                                            </select>
                                        </td>
                                        <td class="j-inputs" id="Conditions">
                                            <select name="Conditions">
                                                <option value="0">@(Model.PriceType != 1 && Model.PriceType != 2 ? "件数" : (Model.PriceType == 1 ? "重量" : "体积"))</option>
                                                <option value="1">金额</option>
                                                <option value="2">@(Model.PriceType != 1 && Model.PriceType != 2 ? "件数" : (Model.PriceType == 1 ? "重量" : "体积"))+金额</option>
                                            </select>
                                            <div class="space-4"></div>
                                            <p class="Conditions-table">
                                                满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">
                                                @(Model.PriceType != 1 && Model.PriceType != 2 ? "件" : (Model.PriceType == 1 ? "kg" : "m³"))
                                                包邮
                                            </p>
                                        </td>
                                        <td>
                                            <button class="btn btn-xs btn-success addtr text-nowrap" type="button">添加</button>
                                            <button class="btn btn-xs btn-danger deletes text-nowrap" type="button">删除</button>
                                        </td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                    <div class="j-table-city hide" id="j-ziti-city">
                        <a href="javascript:void(0)">为指定区域城市设置运费</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="space-4"></div>

    <div class="clearfix form-actions">
        <div class="col-md-offset-2 col-md-10">
            <button class="btn btn-info" type="button" id="J-Submit-Btn">
                <i class="icon-ok bigger-110"></i>提交
            </button>
        </div>
    </div>
}
        @section specificscripts{
            <script src="@Url.Content("~/Areas/Admin/Content/js/bootbox.js")"></script>
            <script src="@Url.Content("~/Areas/Admin/Content/js/jquery.validate.min.js")" type="text/javascript"> </script>
            <script src="@Url.Content("~/Areas/Admin/Content/js/jquery.validate.unobtrusive.min.js")" type="text/javascript"> </script>
            <script src="~/Areas/Admin/Content/js/datetimepicker/bootstrap-datetimepicker.js"></script>
            <script src="~/Areas/Admin/Content/js/datetimepicker/locales/bootstrap-datetimepicker.zh-CN.js"></script>
        }
        @section inlinescripts{
            <script language="javascript">
                String.prototype.trim = function() {
                    //return this.replace(/[(^\s+)(\s+$)]/g,"");//會把字符串中間的空白符也去掉
                    //return this.replace(/^\s+|\s+$/g,""); //
                    return this.replace(/^\s+/g, "").replace(/\s+$/g, "");
                }

                @if (Model.FareFreeConditions != null && Model.FareFreeConditions.Any())
                {
                    @:$("input[name='aa']").click();
                }

                //if ($(".input-mini").last().val() != "") {
                //
                //}

                function farepricess() {
                    var result = "";
                    if ($("input[name='Baoyou']:checked").val() != "-1") {
                        if ($("#J-Exemption").find("input[type='checkbox']").prop("checked")) {
                            $("#J-Exemption-table table tbody tr").each(function() {
                                var cityInfo = $(this).find("span").attr("id").split(',');
                                for (var a in cityInfo) {
                                    if (parseInt(cityInfo[a]) > 0) {
                                        result += cityInfo[a] + ",";
                                    }
                                }

                                var fareFreeCondition = $("select[name='Conditions']", this).val();
                                result += fareFreeCondition + ",";
                                if (fareFreeCondition == "0") {
                                    result += $("input[type='text']", this).first().val() + "," + "0" + ",";
                                } else if (fareFreeCondition == "1") {
                                    result += "0" + "," + $("input[type='text']", this).first().val() + ",";
                                } else {
                                    $("input[type='text']", this).each(function() {
                                        result += $(this).val() + ",";
                                    });
                                }
                                result = result.replace(/(\,*$)/g, "");
                                result += "-";
                                result = result + $("select[name='Methods']", this).val() + "#";
                            });
                        }
                        result = result.replace(/(\#*$)/g, "");
                    }

                    return result;
                }

                var name = "";
                var s = '件';
                var nameids = "";
                $(function() {
                    selectchange();
                    addtr();
                    tabledelete();
                    $("#J-Exemption").find("input[type='checkbox']").on("change", function() {
                        var option1 = $("input[name='IsKuaidi']").prop("checked") ? '<option value="4">快递</option>' : "";
                        var option2 = $("input[name='section']").prop("checked") ? '<option value="419">自提</option>' : "";
                        var option3 = $("input[name='IsShangjia']").prop("checked") ? '<option value="2">商家配送</option>' : "";
                        if ($("#J-Exemption-table").find("table tbody tr").length < 1) {
                            $("#J-Exemption-tr").append('<tr><td><span></span><a class="j-city" href="javascript:;">编辑</a></td><td><select name="Methods">' + option1 + option2 + option3 + '</select></td><td class="j-inputs" id="Conditions"><select name="Conditions"><option value="0">' + $("input[name='type']:checked").next().text().substring(1, 3) + '</option><option value="1">金额</option><option value="2">' + $("input[name='type']:checked").next().text().substring(1, 3) + '+金额</option></select><div class="space-4"></div><p class="Conditions-table">满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">' + $("input[name='type']:checked").attr("text") + '包邮</p></td><td><button class="btn btn-xs btn-success addtr" type="button">添加</button><button class="btn btn-xs btn-danger deletes text-nowrap" type="button">删除</button></td></tr>');
                            selectchange();
                            addtr();
                            tabledelete();
                            $(".j-city").unbind();
                            addcity();
                        }
                        if ($(this).prop("checked")) $("#J-Exemption-table").removeClass("hide");
                        else $("#J-Exemption-table").addClass("hide");
                    });
                    $(".section").find("input[type='checkbox']").on("change", function() {
                        exemptionChecked();
                        if ($(this).prop("checked")) {
                            $("select[name='Methods']").append("<option value='" + $(this).val() + "'>" + $(this).next().text().trim() + "</option>");
                        } else {
                            var text = $(this).next().text().trim();
                            $("select[name='Methods']").find("option").each(function() {
                                if ($(this).text() == text) {
                                    $(this).remove();
                                }
                            });
                        }
                    });
                    addcity();
                    settemplatevalue();
                    initdetail();
                    $(".j-save-error").hide();
                    $(".j-kuaidi,.j-ziti,.j-shangjia,.j-shangjia,input[name='Baoyou']").on("click", (function() {
                        initdetail();
                    }));
                    //$(".j-shangjia,input[name='Baoyou']").click(function () {
                    //    $(".input-text").val("");
                    //    $(".j-error-msg span").html("");
                    //});
                    $(".input-text").blur(function() {
                        if ($(this).attr("data-val-range-min") > $(this).val() || $(this).attr("data-val-range-max") < $(this).val()) {
                            $(".j-" + $(this).attr("data-type") + "-error-msg").html('<i class="icon-remove"></i> ' + $(this).attr("data-val-range"));
                        } else if ($(this).val().length == 0) {
                            $(".j-" + $(this).attr("data-type") + "-error-msg").html('<i class="icon-remove"></i> ' + $(this).attr("data-val-required"));
                        } else {
                            $(".j-" + $(this).attr("data-type") + "-error-msg").html("");
                        }
                    });

                    $("#J-Submit-Btn").click(function() {
                        if (checkuserintpus("kuaidi") && checkuserintpus("ziti") && checkuserintpus("shangjia") && checkuserintpu()) {
                            var id = $(".j-template-id").val();
                            var title = $("#Name").val();
                            var farefree = $("input[name='Baoyou']:checked").val();
                            var price = getprice();
                            var fareprices = farepricess();
                            var logprice = getprices();
                            var pricetype = $("input[name='type']:checked").val();
                            if (title.length <= 0) {
                                bootbox.alert("请输入模板名称");
                                return;
                            }
                            if (farefree.length <= 0) {
                                bootbox.alert("请选择是否包邮");
                                return;
                            }
                            if (price.length <= 0) {
                                bootbox.alert("请选择运费方式");
                                return;
                            }
                            $.post("@Url.Action("SaveTemplate", "Setting")", { templateId: id, title: title, farefree: farefree, price: price, logprice: logprice, fareprices: fareprices, pricetype: pricetype }, function(r) {
                                if (r) {
                                    bootbox.alert("保存成功，页面将会在1秒后自动跳转");
                                    setTimeout(function() {
                                        window.location.href = "@Url.Action("Logistics")";
                                    }, 1000);
                                    return;
                                }

                                bootbox.alert("保存失败，请刷新后重新提交");
                            });

                            return;
                        }

                        bootbox.alert("你还有城市或者运费未输入");
                    });

                    function tabledelete() {
                        $(".deletes").off().on('click', function() {
                            var link = $(this).closest("tr");
                            var trCount = $(this).closest("tbody").find("tr").length;
                            //alert(trCount);
                            //var bt = this;

                            bootbox.confirm("确定删除当前地区的设置?", function(result) {
                                if (result) {
                                    if (trCount <= 1) {
                                        if (link.closest("table").hasClass("j-free-condition")) {
                                            $("input[name='aa']").prop("checked", false);
                                        }

                                        link.closest("table").parent().addClass("hide");
                                    }

                                    link.remove();
                                }
                            });
                        });
                    }

                    function addtr() {
                        $(".addtr").on('click', function() {
                            $("#J-Exemption-tr").append("<tr>" + $("#J-Exemption-tr").find("tr").first().html() + "</tr>");
                            $("#J-Exemption-tr").find('tr').last().find("span").text("");
                            $("#J-Exemption-tr").find('tr').last().find("span").attr("id", "");
                            $("#J-Exemption-tr").find('tr').last().find("input[type='text']").val("");
                            $(".j-city").unbind();
                            $(".addtr").unbind();
                            $("select[name='Conditions']").unbind();
                            selectchange();
                            $("select[name='Conditions']").last().change();
                            addtr();
                            addcity();
                            tabledelete();
                        });
                    }

                    function selectchange() {
                        $("select[name='Conditions']").on("change", function() {

                            $(this).parent().find("p").remove(".Conditions-table");
                            switch ($(this).val()) {
                            case "0":
                                {
                                    $(this).parent().append('<p class="Conditions-table">满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">' + $(":radio[name='type']:checked").attr("text") + '包邮</p>');
                                }
                                break;
                            case "2":
                                {
                                    $(this).parent().append('<p class="Conditions-table">满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">' + $(":radio[name='type']:checked").attr("text") + '满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">元包邮</p>');
                                }
                                break;
                            default:
                                {
                                    $(this).parent().append('<p class="Conditions-table">满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">元包邮</p>');
                                }
                                break;
                            }
                        });
                    }

                    function exemptionChecked() {
                        var checked = false;
                        $(".section").find("input[type='checkbox']").each(function() {
                            if ($(this).prop("checked")) {
                                checked = true;
                            }
                        });

                        if (checked) {

                            if ($("#J-Exemption").find("input[type='checkbox']").prop("checked")) {

                                $("#J-Exemption-table").removeClass("hide");
                            }
                            $("#J-Exemption").removeClass("hide");
                        } else {
                            $("#J-Exemption-table").addClass("hide");
                            $("#J-Exemption").addClass("hide");
                        }
                    }

                    function addcity() {
                        $(".j-city").on("click", function() {
                            var link = $(this).closest("tr").find("span");
                            name = "";
                            if ($(this).closest("tr").find("span").attr("id") != undefined) {
                                nameids = $(this).closest("tr").find("span").attr("id");
                            }
                            $(this).parents(".j-sample-table-2").find("tbody tr td span").each(function() {
                                if (link.text() == $(this).text()) {
                                    return;
                                }

                                name = name + $(this).text() + ",";
                            });

                            $.get('@Url.Action("FreightTables", "Setting")', function(html) {
                                bootbox.dialog({
                                    message: html,
                                    title: "选择区域",
                                    buttons: {
                                        success: {
                                            label: "提交",
                                            className: "btn-success",
                                            callback: function() {
                                                link.attr("id", id.replace(/(\,*$)/g, ""));
                                                link.html(names.replace(/(\,*$)/g, ""));
                                                bootbox.hideAll();
                                                return false;
                                            }
                                        },
                                        danger:
                                        {
                                            label: "取消",
                                            className: "btn-danger",
                                            callback: function() {}
                                        }
                                    }
                                });
                            });
                            return false;
                        });
                    }

                    jQuery(function($) {
                        $(".j-table-city").on('click', function() {
                            var table = '<tr><td><span></span><a class="j-city" href="javascript:void(0)">编辑</a></td><td><input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6"></td><td><input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6"></td><td><input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6"></td><td><input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6"></td><td><button class="btn btn-xs btn-danger deletes text-nowrap" type="button">删除</button></td></tr>';
                            $(this).parents(".section").find("table tbody").append(table);
                            tabledelete();
                            initdetail();
                            $(".j-city").unbind();
                            addcity();
                            return false;
                        });
                        $("input[name='type']").change(function() {
                            var text = $(this).attr("text");
                            bootbox.confirm("切换计价方式后，所设置的当前模板运输信息会被清空，确定继续?", function(result) {
                                if (result) {
                                    $("input[type='checkbox']").each(function() {
                                        if ($(this).prop("checked") == true) {
                                            $(this).click();
                                        }
                                    });

                                    $(".u-input").find("table tbody tr").remove();
                                    $("#J-Exemption-tr").append('<tr><td><span></span><a class="j-city" href="javascript:void(0)">编辑</a></td><td><select name="Methods"></select></td><td class="j-inputs" id="Conditions"><select name="Conditions"><option value="0">件数</option><option value="1">金额</option><option value="2">件数+金额</option></select><div class="space-4"></div><p class="Conditions-table">满<input type="text" value="" class="input-mini" data-type="kuaidi-start" data-val-required="首件应输入1至9999的数字" data-val-range-min="1" data-val-range-max="9999" maxlength="6">件包邮</p></td><td><button class="btn btn-xs btn-success addtr" type="button">添加</button><button class="btn btn-xs btn-danger deletes text-nowrap" type="button">删除</button></td></tr>');
                                    $('.j-inputs').find("input[type='text']").each(function() {
                                        $(this).val();
                                    });
                                    if (s == "件") {
                                        if (text == "kg") {
                                            $('.j-inputs').each(function() {
                                                $(this).html($(this).html().replace(/件数/g, "重量"));
                                                $(this).html($(this).html().replace(/首件/g, "首重"));
                                                $(this).html($(this).html().replace(/续件/g, "续重"));
                                                $(this).html($(this).html().replace(/件/g, text));
                                            });
                                        } else {
                                            $('.j-inputs').each(function() {
                                                $(this).html($(this).html().replace(/件数/g, "体积"));
                                                $(this).html($(this).html().replace(/首件/g, "首体积"));
                                                $(this).html($(this).html().replace(/续件/g, "续体积"));
                                                $(this).html($(this).html().replace(/件/g, text));
                                            });
                                        }
                                    } else if (s == "kg") {
                                        if (text == "件") {
                                            $('.j-inputs').each(function() {
                                                $(this).html($(this).html().replace(/重量/g, "件数"));
                                                $(this).html($(this).html().replace(/首重/g, "首件"));
                                                $(this).html($(this).html().replace(/续重/g, "续件"));
                                                $(this).html($(this).html().replace(/件/g, text));
                                            });
                                        } else {
                                            $('.j-inputs').each(function() {
                                                $(this).html($(this).html().replace(/重量/g, "体积"));
                                                $(this).html($(this).html().replace(/首重/g, "首体积"));
                                                $(this).html($(this).html().replace(/续重/g, "续体积"));
                                                $(this).html($(this).html().replace(/件/g, text));
                                            });
                                        }
                                    } else {
                                        if (text == "kg") {
                                            $('.j-inputs').each(function() {
                                                $(this).html($(this).html().replace(/体积/g, "重量"));
                                                $(this).html($(this).html().replace(/首体积/g, "首重"));
                                                $(this).html($(this).html().replace(/续体积/g, "续重"));
                                                $(this).html($(this).html().replace(/件/g, text));
                                            });
                                        } else {
                                            $('.j-inputs').each(function() {
                                                $(this).html($(this).html().replace(/体积/g, "件数"));
                                                $(this).html($(this).html().replace(/首体积/g, "首件"));
                                                $(this).html($(this).html().replace(/续体积/g, "续件"));
                                                $(this).html($(this).html().replace(/件/g, text));
                                            });
                                        }
                                    }
                                    s = text;
                                    selectchange();
                                    addtr();
                                    tabledelete();
                                } else {
                                    $("input[text=" + s + "]").prop("checked", "true");
                                }
                            });

                            return false;
                        });
                    });

                    function initdetail() {
                        if ($("input[name='Baoyou']:checked").val() != "-1") {
                            exemptionChecked();
                            if ($(".j-shangjia").prop("checked")) {
                                $(".j-shangjia-detail").show();
                                $("#j-shangjia-city").removeClass("hide");
                                if ($("#j-shangjia-detail").find("tr").length > 1) {
                                    $("#j-shangjia-detail").removeClass("hide");
                                }
                            } else {
                                $(".j-shangjia-detail").hide();
                                $("#j-shangjia-city").addClass("hide");
                                $("#j-shangjia-detail").addClass("hide");
                            }
                            if ($(".j-ziti").prop("checked")) {
                                $(".j-ziti-detail").show();
                                $("#j-ziti-city").removeClass("hide");
                                if ($("#j-ziti-detail").find("tr").length > 1) {
                                    $("#j-ziti-detail").removeClass("hide");
                                }
                            } else {
                                $(".j-ziti-detail").hide();
                                $("#j-ziti-detail").addClass("hide");
                                $("#j-ziti-city").addClass("hide");
                            }
                            if ($(".j-kuaidi").prop("checked")) {
                                $(".j-kuaidi-detail").show();
                                $("#j-kuaidi-city").removeClass("hide");
                                if ($("#j-kuaidi-detail").find("tr").length > 1) {
                                    $("#j-kuaidi-detail").removeClass("hide");
                                }
                            } else {
                                $(".j-kuaidi-detail").hide();
                                $("#j-kuaidi-city").addClass("hide");
                                $("#j-kuaidi-detail").addClass("hide");
                                exemptionChecked();
                            }
                        } else {
                            $("#j-kuaidi-detail").addClass("hide");
                            $("#j-ziti-detail").addClass("hide");
                            $("#j-shangjia-detail").addClass("hide");
                            $("#j-shangjia-city").addClass("hide");
                            $("#j-kuaidi-city").addClass("hide");
                            $("#j-ziti-city").addClass("hide");
                            $("#J-Exemption").addClass("hide");
                            $(".j-kuaidi-detail").hide();
                            $(".j-ziti-detail").hide();
                            $(".j-shangjia-detail").hide();
                        }
                    }
                });

                function settemplatevalue() {
                    if ($(".j-template-id").val().length > 0) {
                        $("input[name='Baoyou']:radio[value='@Model.FareFree']").attr('checked', 'true');
                    }
                    if ($(".j-kuaidi-start").val().length > 0) {
                        $(".j-kuaidi").attr('checked', 'true');
                    }
                    if ($(".j-ziti-start").val().length > 0) {
                        $(".j-ziti").attr('checked', 'true');
                    }
                    if ($(".j-shangjia-start").val().length > 0) {
                        $(".j-shangjia").attr('checked', 'true');
                    }
                }

                function checkuserintpus(p) {
                    var result = true;
                    if ($("input[name='Baoyou']:checked").val() != "-1") {
                        if ($(".j-" + p).prop("checked")) {
                            $(".j-" + p + "-detail .input-text").each(function() {
                                if ($(this).attr("data-val-range-min") > $(this).val() || $(this).attr("data-val-range-max") < $(this).val()) {
                                    $(".j-" + $(this).attr("data-type") + "-error-msg").html('<i class="icon-remove"></i> ' + $(this).attr("data-val-range"));
                                    result = false;
                                } else if ($(this).val().length == 0) {
                                    $(".j-" + $(this).attr("data-type") + "-error-msg").html('<i class="icon-remove"></i> ' + $(this).attr("data-val-required"));
                                    result = false;
                                } else {
                                    $(".j-" + $(this).attr("data-type") + "-error-msg").html("");
                                }
                            });
                            $("#j-" + p + "-detail").find("table tbody tr").each(function() {
                                if ($(this).find("span").attr("id") == undefined || $(this).find("span").attr("id") == "") {
                                    result = false;
                                }
                                $(this).find("input[type='text']").each(function() {
                                    if ($(this).val() == undefined || $(this).val() == "") {
                                        result = false;
                                    }
                                });
                            });
                        }
                    }
                    return result;
                }

                function checkuserintpu() {
                    var result = true;
                    if ($("input[name='Baoyou']:checked").val() != "-1") {
                        if ($("#J-Exemption").find("input[type='checkbox']").prop("checked")) {
                            $("#J-Exemption").find("table tbody tr").each(function() {
                                if ($(this).find("span").attr("id") == undefined || $(this).find("span").attr("id") == "") {
                                    result = false;
                                }
                                $(this).find("input[type='text']").each(function() {
                                    if ($(this).val() == undefined || $(this).val() == "") {
                                        result = false;
                                    }
                                });
                                if ($(this).find("select[name='Methods']").val() == undefined) {
                                    result = false;
                                }
                            });

                        }
                    }
                    return result;
                }


                function getprices() {
                    var result = "";
                    if ($("input[name='Baoyou']:checked").val() != "-1") {
                        if ($(".j-kuaidi").prop("checked")) {
                            $("#j-kuaidi-detail").find("table tbody tr").each(function() {
                                for (var a in $(this).find("span").attr("id").split(',')) {
                                    if (parseInt($(this).find("span").attr("id").split(',')[a]) > 0) {
                                        result += $(this).find("span").attr("id").split(',')[a] + ",";
                                    }
                                }
                                $(this).find("input[type='text']").each(function() {
                                    result += $(this).val() + ",";
                                });
                                result = result.replace(/(\,*$)/g, "");
                                result += "-";
                            });
                            if ($("#j-kuaidi-detail").find("table tbody tr").length > 0) {
                                result += "4";
                            }

                        }
                        if ($(".j-ziti").prop("checked")) {
                            if (result.length > 0) {
                                result += "#";
                            }
                            $("#j-ziti-detail").find("table tbody tr").each(function() {
                                for (var a in $(this).find("span").attr("id").split(',')) {
                                    if (parseInt($(this).find("span").attr("id").split(',')[a]) > 0) {
                                        result += $(this).find("span").attr("id").split(',')[a] + ",";
                                    }
                                }
                                $(this).find("input[type='text']").each(function() {
                                    result += $(this).val() + ",";
                                });
                                result = result.replace(/(\,*$)/g, "");
                                result += "-";
                            });
                            if ($("#j-ziti-detail").find("table tbody tr").length > 0) {
                                result += "419";
                            }
                        }
                        if ($(".j-shangjia").prop("checked")) {
                            if (result.length > 0) {
                                result += "#";
                            }
                            $("#j-shangjia-detail").find("table tbody tr").each(function() {
                                for (var a in $(this).find("span").attr("id").split(',')) {
                                    if (parseInt($(this).find("span").attr("id").split(',')[a]) > 0) {
                                        result += $(this).find("span").attr("id").split(',')[a] + ",";
                                    }
                                }
                                $(this).find("input[type='text']").each(function() {
                                    result += $(this).val() + ",";
                                });
                                result = result.replace(/(\,*$)/g, "");
                                result += "-";
                            });
                            if ($("#j-shangjia-detail").find("table tbody tr").length > 0) {
                                result += "2";
                            }
                        }
                    }
                    return result;
                }

                function getprice() {
                    var result = "";
                    if ($("input[name='Baoyou']:checked").val() != "-1") {
                        if ($(".j-kuaidi").prop("checked")) {
                            result += "4," + $(".j-kuaidi-start").val() + "," + $(".j-kuaidi-age").val() + "," + $(".j-kuaidi-plus").val() + "," + $(".j-kuaidi-plusage").val();
                        }
                        if ($(".j-ziti").prop("checked")) {
                            if (result.length > 0) {
                                result += "#";
                            }
                            result += "419," + $(".j-ziti-start").val() + "," + $(".j-ziti-age").val() + "," + $(".j-ziti-plus").val() + "," + $(".j-ziti-plusage").val();
                        }
                        if ($(".j-shangjia").prop("checked")) {
                            if (result.length > 0) {
                                result += "#";
                            }
                            result += "2," + $(".j-shangjia-start").val() + "," + $(".j-shangjia-age").val() + "," + $(".j-shangjia-plus").val() + "," + $(".j-shangjia-plusage").val();
                        }
                    } else {
                        if ($(".j-kuaidi").prop("checked")) {
                            result += "4,1,0,1,0";
                        }
                        if ($(".j-ziti").prop("checked")) {
                            if (result.length > 0) {
                                result += "#";
                            }
                            result += "419,1,0,1,0";
                        }
                        if ($(".j-shangjia").prop("checked")) {
                            if (result.length > 0) {
                                result += "#";
                            }
                            result += "2,1,0,1,0";
                        }
                    }
                    return result;
                }

                $(".date-picker").datetimepicker({ format: 'yyyy-mm-dd', language: 'zh-CN', formatViewType: "date" });
            </script>
        }


